"use strict";(()=>{var mt=Object.create;var st=Object.defineProperty;var $t=Object.getOwnPropertyDescriptor;var pt=Object.getOwnPropertyNames;var gt=Object.getPrototypeOf,vt=Object.prototype.hasOwnProperty;var B=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports);var yt=(a,e,_,P)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of pt(e))!vt.call(a,c)&&c!==_&&st(a,c,{get:()=>e[c],enumerable:!(P=$t(e,c))||P.enumerable});return a};var J=(a,e,_)=>(_=a!=null?mt(gt(a)):{},yt(e||!a||!a.__esModule?st(_,"default",{value:a,enumerable:!0}):_,a));var at=B((V,Q)=>{(function(a,e){typeof V=="object"&&typeof Q!="undefined"?Q.exports=e():typeof define=="function"&&define.amd?define(e):(a=typeof globalThis!="undefined"?globalThis:a||self).dayjs=e()})(V,function(){"use strict";var a=1e3,e=6e4,_=36e5,P="millisecond",c="second",x="minute",h="hour",$="day",C="week",b="month",p="quarter",v="year",m="date",r="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var i=["th","st","nd","rd"],t=o%100;return"["+o+(i[(t-20)%10]||i[t]||i[0])+"]"}},S=function(o,i,t){var s=String(o);return!s||s.length>=i?o:""+Array(i+1-s.length).join(t)+o},Y={s:S,z:function(o){var i=-o.utcOffset(),t=Math.abs(i),s=Math.floor(t/60),n=t%60;return(i<=0?"+":"-")+S(s,2,"0")+":"+S(n,2,"0")},m:function o(i,t){if(i.date()<t.date())return-o(t,i);var s=12*(t.year()-i.year())+(t.month()-i.month()),n=i.clone().add(s,b),u=t-n<0,f=i.clone().add(s+(u?-1:1),b);return+(-(s+(t-n)/(u?n-f:f-n))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:b,y:v,w:C,d:$,D:m,h,m:x,s:c,ms:P,Q:p}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},g="en",O={};O[g]=y;var E="$isDayjsObject",I=function(o){return o instanceof q||!(!o||!o[E])},H=function o(i,t,s){var n;if(!i)return g;if(typeof i=="string"){var u=i.toLowerCase();O[u]&&(n=u),t&&(O[u]=t,n=u);var f=i.split("-");if(!n&&f.length>1)return o(f[0])}else{var M=i.name;O[M]=i,n=M}return!s&&n&&(g=n),n||!s&&g},D=function(o,i){if(I(o))return o.clone();var t=typeof i=="object"?i:{};return t.date=o,t.args=arguments,new q(t)},l=Y;l.l=H,l.i=I,l.w=function(o,i){return D(o,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var q=function(){function o(t){this.$L=H(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[E]=!0}var i=o.prototype;return i.parse=function(t){this.$d=function(s){var n=s.date,u=s.utc;if(n===null)return new Date(NaN);if(l.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var f=n.match(d);if(f){var M=f[2]-1||0,T=(f[7]||"0").substring(0,3);return u?new Date(Date.UTC(f[1],M,f[3]||1,f[4]||0,f[5]||0,f[6]||0,T)):new Date(f[1],M,f[3]||1,f[4]||0,f[5]||0,f[6]||0,T)}}return new Date(n)}(t),this.init()},i.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},i.$utils=function(){return l},i.isValid=function(){return this.$d.toString()!==r},i.isSame=function(t,s){var n=D(t);return this.startOf(s)<=n&&n<=this.endOf(s)},i.isAfter=function(t,s){return D(t)<this.startOf(s)},i.isBefore=function(t,s){return this.endOf(s)<D(t)},i.$g=function(t,s,n){return l.u(t)?this[s]:this.set(n,t)},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this.$d.getTime()},i.startOf=function(t,s){var n=this,u=!!l.u(s)||s,f=l.p(t),M=function(A,j){var L=l.w(n.$u?Date.UTC(n.$y,j,A):new Date(n.$y,j,A),n);return u?L:L.endOf($)},T=function(A,j){return l.w(n.toDate()[A].apply(n.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(j)),n)},z=this.$W,N=this.$M,U=this.$D,G="set"+(this.$u?"UTC":"");switch(f){case v:return u?M(1,0):M(31,11);case b:return u?M(1,N):M(0,N+1);case C:var k=this.$locale().weekStart||0,Z=(z<k?z+7:z)-k;return M(u?U-Z:U+(6-Z),N);case $:case m:return T(G+"Hours",0);case h:return T(G+"Minutes",1);case x:return T(G+"Seconds",2);case c:return T(G+"Milliseconds",3);default:return this.clone()}},i.endOf=function(t){return this.startOf(t,!1)},i.$set=function(t,s){var n,u=l.p(t),f="set"+(this.$u?"UTC":""),M=(n={},n[$]=f+"Date",n[m]=f+"Date",n[b]=f+"Month",n[v]=f+"FullYear",n[h]=f+"Hours",n[x]=f+"Minutes",n[c]=f+"Seconds",n[P]=f+"Milliseconds",n)[u],T=u===$?this.$D+(s-this.$W):s;if(u===b||u===v){var z=this.clone().set(m,1);z.$d[M](T),z.init(),this.$d=z.set(m,Math.min(this.$D,z.daysInMonth())).$d}else M&&this.$d[M](T);return this.init(),this},i.set=function(t,s){return this.clone().$set(t,s)},i.get=function(t){return this[l.p(t)]()},i.add=function(t,s){var n,u=this;t=Number(t);var f=l.p(s),M=function(N){var U=D(u);return l.w(U.date(U.date()+Math.round(N*t)),u)};if(f===b)return this.set(b,this.$M+t);if(f===v)return this.set(v,this.$y+t);if(f===$)return M(1);if(f===C)return M(7);var T=(n={},n[x]=e,n[h]=_,n[c]=a,n)[f]||1,z=this.$d.getTime()+t*T;return l.w(z,this)},i.subtract=function(t,s){return this.add(-1*t,s)},i.format=function(t){var s=this,n=this.$locale();if(!this.isValid())return n.invalidDate||r;var u=t||"YYYY-MM-DDTHH:mm:ssZ",f=l.z(this),M=this.$H,T=this.$m,z=this.$M,N=n.weekdays,U=n.months,G=n.meridiem,k=function(j,L,R,F){return j&&(j[L]||j(s,u))||R[L].slice(0,F)},Z=function(j){return l.s(M%12||12,j,"0")},A=G||function(j,L,R){var F=j<12?"AM":"PM";return R?F.toLowerCase():F};return u.replace(w,function(j,L){return L||function(R){switch(R){case"YY":return String(s.$y).slice(-2);case"YYYY":return l.s(s.$y,4,"0");case"M":return z+1;case"MM":return l.s(z+1,2,"0");case"MMM":return k(n.monthsShort,z,U,3);case"MMMM":return k(U,z);case"D":return s.$D;case"DD":return l.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return k(n.weekdaysMin,s.$W,N,2);case"ddd":return k(n.weekdaysShort,s.$W,N,3);case"dddd":return N[s.$W];case"H":return String(M);case"HH":return l.s(M,2,"0");case"h":return Z(1);case"hh":return Z(2);case"a":return A(M,T,!0);case"A":return A(M,T,!1);case"m":return String(T);case"mm":return l.s(T,2,"0");case"s":return String(s.$s);case"ss":return l.s(s.$s,2,"0");case"SSS":return l.s(s.$ms,3,"0");case"Z":return f}return null}(j)||f.replace(":","")})},i.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},i.diff=function(t,s,n){var u,f=this,M=l.p(s),T=D(t),z=(T.utcOffset()-this.utcOffset())*e,N=this-T,U=function(){return l.m(f,T)};switch(M){case v:u=U()/12;break;case b:u=U();break;case p:u=U()/3;break;case C:u=(N-z)/6048e5;break;case $:u=(N-z)/864e5;break;case h:u=N/_;break;case x:u=N/e;break;case c:u=N/a;break;default:u=N}return n?u:l.a(u)},i.daysInMonth=function(){return this.endOf(b).$D},i.$locale=function(){return O[this.$L]},i.locale=function(t,s){if(!t)return this.$L;var n=this.clone(),u=H(t,s,!0);return u&&(n.$L=u),n},i.clone=function(){return l.w(this.$d,this)},i.toDate=function(){return new Date(this.valueOf())},i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toISOString=function(){return this.$d.toISOString()},i.toString=function(){return this.$d.toUTCString()},o}(),it=q.prototype;return D.prototype=it,[["$ms",P],["$s",c],["$m",x],["$H",h],["$W",$],["$M",b],["$y",v],["$D",m]].forEach(function(o){it[o[1]]=function(i){return this.$g(i,o[0],o[1])}}),D.extend=function(o,i){return o.$i||(o(i,q,D),o.$i=!0),D},D.locale=H,D.isDayjs=I,D.unix=function(o){return D(1e3*o)},D.en=O[g],D.Ls=O,D.p={},D})});var ot=B((K,X)=>{(function(a,e){typeof K=="object"&&typeof X!="undefined"?X.exports=e():typeof define=="function"&&define.amd?define(e):(a=typeof globalThis!="undefined"?globalThis:a||self).dayjs_plugin_relativeTime=e()})(K,function(){"use strict";return function(a,e,_){a=a||{};var P=e.prototype,c={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function x($,C,b,p){return P.fromToBase($,C,b,p)}_.en.relativeTime=c,P.fromToBase=function($,C,b,p,v){for(var m,r,d,w=b.$locale().relativeTime||c,y=a.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],S=y.length,Y=0;Y<S;Y+=1){var g=y[Y];g.d&&(m=p?_($).diff(b,g.d,!0):b.diff($,g.d,!0));var O=(a.rounding||Math.round)(Math.abs(m));if(d=m>0,O<=g.r||!g.r){O<=1&&Y>0&&(g=y[Y-1]);var E=w[g.l];v&&(O=v(""+O)),r=typeof E=="string"?E.replace("%d",O):E(O,C,g.l,d);break}}if(C)return r;var I=d?w.future:w.past;return typeof I=="function"?I(r):I.replace("%s",r)},P.to=function($,C){return x($,C,this,!0)},P.from=function($,C){return x($,C,this)};var h=function($){return $.$u?_.utc():_()};P.toNow=function($){return this.to(h(this),$)},P.fromNow=function($){return this.from(h(this),$)}}})});var ut=B((tt,et)=>{(function(a,e){typeof tt=="object"&&typeof et!="undefined"?et.exports=e():typeof define=="function"&&define.amd?define(e):(a=typeof globalThis!="undefined"?globalThis:a||self).dayjs_plugin_timezone=e()})(tt,function(){"use strict";var a={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(_,P,c){var x,h=function(p,v,m){m===void 0&&(m={});var r=new Date(p),d=function(w,y){y===void 0&&(y={});var S=y.timeZoneName||"short",Y=w+"|"+S,g=e[Y];return g||(g=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:w,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:S}),e[Y]=g),g}(v,m);return d.formatToParts(r)},$=function(p,v){for(var m=h(p,v),r=[],d=0;d<m.length;d+=1){var w=m[d],y=w.type,S=w.value,Y=a[y];Y>=0&&(r[Y]=parseInt(S,10))}var g=r[3],O=g===24?0:g,E=r[0]+"-"+r[1]+"-"+r[2]+" "+O+":"+r[4]+":"+r[5]+":000",I=+p;return(c.utc(E).valueOf()-(I-=I%1e3))/6e4},C=P.prototype;C.tz=function(p,v){p===void 0&&(p=x);var m=this.utcOffset(),r=this.toDate(),d=r.toLocaleString("en-US",{timeZone:p}),w=Math.round((r-new Date(d))/1e3/60),y=c(d,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(r.getTimezoneOffset()/15)-w,!0);if(v){var S=y.utcOffset();y=y.add(m-S,"minute")}return y.$x.$timezone=p,y},C.offsetName=function(p){var v=this.$x.$timezone||c.tz.guess(),m=h(this.valueOf(),v,{timeZoneName:p}).find(function(r){return r.type.toLowerCase()==="timezonename"});return m&&m.value};var b=C.startOf;C.startOf=function(p,v){if(!this.$x||!this.$x.$timezone)return b.call(this,p,v);var m=c(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return b.call(m,p,v).tz(this.$x.$timezone,!0)},c.tz=function(p,v,m){var r=m&&v,d=m||v||x,w=$(+c(),d);if(typeof p!="string")return c(p).tz(d);var y=function(O,E,I){var H=O-60*E*1e3,D=$(H,I);if(E===D)return[H,E];var l=$(H-=60*(D-E)*1e3,I);return D===l?[H,D]:[O-60*Math.min(D,l)*1e3,Math.max(D,l)]}(c.utc(p,r).valueOf(),w,d),S=y[0],Y=y[1],g=c(S).utcOffset(Y);return g.$x.$timezone=d,g},c.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},c.tz.setDefault=function(p){x=p}}})});var ft=B((nt,rt)=>{(function(a,e){typeof nt=="object"&&typeof rt!="undefined"?rt.exports=e():typeof define=="function"&&define.amd?define(e):(a=typeof globalThis!="undefined"?globalThis:a||self).dayjs_plugin_utc=e()})(nt,function(){"use strict";var a="minute",e=/[+-]\d\d(?::?\d\d)?/g,_=/([+-]|\d\d)/g;return function(P,c,x){var h=c.prototype;x.utc=function(r){var d={date:r,utc:!0,args:arguments};return new c(d)},h.utc=function(r){var d=x(this.toDate(),{locale:this.$L,utc:!0});return r?d.add(this.utcOffset(),a):d},h.local=function(){return x(this.toDate(),{locale:this.$L,utc:!1})};var $=h.parse;h.parse=function(r){r.utc&&(this.$u=!0),this.$utils().u(r.$offset)||(this.$offset=r.$offset),$.call(this,r)};var C=h.init;h.init=function(){if(this.$u){var r=this.$d;this.$y=r.getUTCFullYear(),this.$M=r.getUTCMonth(),this.$D=r.getUTCDate(),this.$W=r.getUTCDay(),this.$H=r.getUTCHours(),this.$m=r.getUTCMinutes(),this.$s=r.getUTCSeconds(),this.$ms=r.getUTCMilliseconds()}else C.call(this)};var b=h.utcOffset;h.utcOffset=function(r,d){var w=this.$utils().u;if(w(r))return this.$u?0:w(this.$offset)?b.call(this):this.$offset;if(typeof r=="string"&&(r=function(g){g===void 0&&(g="");var O=g.match(e);if(!O)return null;var E=(""+O[0]).match(_)||["-",0,0],I=E[0],H=60*+E[1]+ +E[2];return H===0?0:I==="+"?H:-H}(r),r===null))return this;var y=Math.abs(r)<=16?60*r:r,S=this;if(d)return S.$offset=y,S.$u=r===0,S;if(r!==0){var Y=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(S=this.local().add(y+Y,a)).$offset=y,S.$x.$localOffset=Y}else S=this.utc();return S};var p=h.format;h.format=function(r){var d=r||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,d)},h.valueOf=function(){var r=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*r},h.isUTC=function(){return!!this.$u},h.toISOString=function(){return this.toDate().toISOString()},h.toString=function(){return this.toDate().toUTCString()};var v=h.toDate;h.toDate=function(r){return r==="s"&&this.$offset?x(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():v.call(this)};var m=h.diff;h.diff=function(r,d,w){if(r&&this.$u===r.$u)return m.call(this,r,d,w);var y=this.local(),S=x(r).local();return m.call(y,S,d,w)}}})});var W=J(at(),1),lt=J(ot(),1),ht=J(ut(),1),dt=J(ft(),1);var Mt="stats",Dt=`https://cmsep-backend.mondopower.com.au/${townName}.json`,St=1*60*1e3;document.addEventListener("alpine:init",()=>{window.Alpine.data(Mt,function(){return{townName:"",lastUpdated:dayjs().tz().fromNow(),numberOfSystems:"",isExporting:!1,isPreStormResilience:!1,isResilience:!1,gridExportCount:"",isGridConnected:!1,isIslanded:!1,solarGenerating:"",solarCapacity:"",solarGeneratingPercent:0,batteryChargeState:"",batteryCapacity:"",batteryChargePercent:0,isError:!1,init(){this.queryData(),this.initPolling()},async queryData(){try{let e=await(await fetch(Dt)).json();this.isError=!1,console.debug("API Data fetched",e),this.townName=e.townName,this.lastUpdated=dayjs().tz().to(e.timestamp),this.numberOfSystems=e.numberOfSystems.toString(),this.isExporting=e.status==="Exporting",this.isPreStormResilience=e.status==="Pre-event resilience mode \u2013 charging",this.isResilience=e.status==="Resilience mode \u2013 conserve energy",this.gridExportCount=e.exportingToGrid.value+e.exportingToGrid.unit,this.isGridConnected=e.townSupplyStatus==="Grid connected",this.isIslanded=e.townSupplyStatus==="Islanded",this.solarGenerating=e.solar.generating.value+e.solar.generating.unit,this.solarCapacity=e.solar.capacity.value+e.solar.capacity.unit,this.solarGeneratingPercent=e.solar.generating.value/e.solar.capacity.value*100,this.batteryChargeState=e.batteries.stateOfCharge.value+e.batteries.stateOfCharge.unit,this.batteryCapacity=e.batteries.capacity.value+e.batteries.capacity.unit,this.batteryChargePercent=e.batteries.stateOfCharge.value}catch(a){this.isError=!0,console.error("Error in fetching the data",a)}},initPolling(){try{setInterval(()=>{this.queryData()},St)}catch(a){this.isError=!0,console.error("Error in polling the data",a)}},showPopover(){let a=this.$el.querySelector("[popover]");if(a){if(window.innerWidth>991){let{top:e,left:_}=this.$el.getBoundingClientRect(),P=e,c=_-600;c<0&&(c=15),Object.assign(a.style,{left:`${c}px`,top:`${P}px`})}a.showPopover()}},hidePopover(){var a,e;this.$el.getAttribute("x-ref")==="popoverCloseIcon"?(a=this.$el.closest("[popover]"))==null||a.hidePopover():(e=this.$el.querySelector("[popover]"))==null||e.hidePopover()}}})});globalThis.dayjs=W.default;var ct;(ct=window.Webflow)==null||ct.push(()=>{W.default.extend(dt.default),W.default.extend(ht.default),W.default.extend(lt.default),W.default.tz.setDefault("Australia/Victoria")});})();
